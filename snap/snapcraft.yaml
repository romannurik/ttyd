name: ttyd
adopt-info: ttyd
summary: Share your terminal over the web
description: |
 ttyd is a simple command-line tool for sharing terminal over the web

grade: stable
confinement: strict
base: core20
compression: lzo

license: MIT

assumes:
  - command-chain

apps:
  ttyd:
    command: bin/ttyd
    command-chain: 
      - bin/homeishome-launch       
    plugs:
      - network
      - network-observe
      - home

parts:
  ttyd:
    source: https://github.com/tsl0922/ttyd
    source-type: git
    plugin: make
    make-parameters:
      - -lpthread
    override-pull: |
      snapcraftctl pull
      snapcraftctl set-version "$(git describe --tags | sed 's/^v//' | cut -d "-" -f1)"
      
    build-packages:
      - build-essential 
      - libjson-c-dev 
      - libwebsockets-dev
      
    stage-packages:
      - build-essential 
      - libjson-c-dev 
      - libwebsockets-dev
      
  homeishome-launch:
    plugin: nil
    stage-snaps:
      - homeishome-launch  
